<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>M√ºnchner Kickerwoche</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      margin: 0;
    }

    h1, p {
      text-align: center;
    }

    #calendar {
      max-width: 1400px;
      margin: 20px auto;
      overflow: hidden;
      position: relative;
    }

    .calendar-container {
      display: flex;
      transition: transform 0.3s ease;
      width: 100%;
      height: 100%;
    }

    .calendar-days {
      display: flex;
      width: 100%;
      height: 100%;
      flex-shrink: 0;
    }

    .day {
      flex: 0 0 100%;
      box-sizing: border-box;
      padding: 16px;
    }

    @media (max-width: 699px) {
      .calendar-days {
        grid-template-columns: 1fr;
      }

      .day {
        min-width: 100%;
      }
    }

    .day {
      background-color: #f9f9f9;
      padding: 16px;
      border: 1px solid #ddd;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .day h3 {
      margin: 0 0 10px;
      font-size: 1.2em;
      text-align: center;
      color: #333;
    }

    .entry {
      background: #e0f7fa;
      margin: 8px 0;
      padding: 6px 8px;
      border-left: 4px solid #00796b;
      font-size: 0.95em;
    }

    .entry a {
      color: #00796b;
      text-decoration: none;
    }

    .entry a:hover {
      text-decoration: underline;
    }

    .entry b {
      color: #88796b;
      text-decoration: none;
    }

    .entry small {
      color: #555;
    }

    .entry.tournament {
      background: #CAE5FF;
      border-left: 4px solid #6F8AB7;
    }

    .entry.leisure {
      background: #ACEDFF;
      border-left: 4px solid #89BBFE;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      max-width: 400px;
      margin: 10px auto;
    }

    .navigation button {
      background-color: #6F8AB7;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
    }

    .navigation button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    /* ‚úÖ On wider screens, show all days side by side */
    @media (min-width: 700px) {
      #calendar {
        grid-template-columns: repeat(7, 1fr);
      }

      .navigation {
        display: none; /* Hide buttons on desktop */
      }
    }
  </style>
</head>
<body>

<h1>M√ºnchner Kickerwoche</h1>

<p style="font-size: 1.1em; color: #444; margin-bottom: 20px;">
Regelm√§√üig werden wir gefragt, wo man in M√ºnchen und Umgebung an welchem Tag am besten kickern gehen kann. Daher haben wir hier eine √úbersicht f√ºr euch zusammengestellt.
<br>
Ihr habt Erg√§nzungen? Dann meldet euch gerne <a href="mailto:kickerkalender@kc-muenchen.de">hier</a>
<br>
</p>

<div id="calendar"></div>

<div class="navigation">
  <button id="prevBtn">‚Üê Vorheriger Tag</button>
  <button id="nextBtn">N√§chster Tag ‚Üí</button>
</div>

<script>
  const days = ['Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag', 'Sonntag'];
  const entries = {
    Montag: [
      { title: 'Monster-DYP', time: '8:15 PM', location: '<a href="https://maps.app.goo.gl/sUK2SaNeQZq8CRUj9">Happy Billard, Martinsried</a>', link: 'https://www.tischfussballvereinigung.de/', whatsapp: 'https://chat.whatsapp.com/JTFKNj7SOGCFgFgKe1qMkj', description: 'W√∂chentliches Monster-DYP der Tischfu√üballvereinigung M√ºnchen e.V.', type: 'tournament' }
    ],
    Dienstag: [
      { title: 'Freies Training', time: '6:30 PM', location: '<a href="https://maps.app.goo.gl/dj5vfbZqDJvzbKNg8">Die Katze, KC M√ºnchen</a>', link: 'https://kc-muenchen.de/', whatsapp: 'https://chat.whatsapp.com/FaSZY5WEKq63ChSRYcvYjM', description: 'Freies Training beim KC M√ºnchen e.V.', type: 'tournament'  },
      { title: 'Kneipenkickern', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/tHnYFwcH5km1cfgNA">S√ºdstadt, M√ºnchen</a>', link: 'https://www.suedstadt-schlachthof.de/', description: 'Lockeres Kickern in der S√ºdstadt. Normalerweise ist am Dienstag immer etwas los.', type: 'leisure' }
    ],
    Mittwoch: [
      { title: 'Monster-DYP', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/dj5vfbZqDJvzbKNg8">Die Katze, KC M√ºnchen</a>', link: 'https://kc-muenchen.de/', whatsapp: 'https://chat.whatsapp.com/FaSZY5WEKq63ChSRYcvYjM', description: 'W√∂chentliches Monster-DYP des KickerClub M√ºnchen e.V.', type: 'tournament'  }
    ],
    Donnerstag: [
      { title: 'Monster-DYP (zweiw√∂chentlich)', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/61L8ZAeVZfMYWnCH9">Flex, M√ºnchen</a>', link: 'https://www.flex-muenchen.de/', description: 'Zweiw√∂chentliches Monster-DYP in lockerer Kneipenathmosph√§re. Findet immer alternierend zum Einzelturnier beim KC M√ºnchen statt.', type: 'tournament'  },
      { title: 'Kneipenkickern', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/61L8ZAeVZfMYWnCH9">Flex, M√ºnchen</a>', link: 'https://www.flex-muenchen.de/', description: 'Wenn kein Turnier stattfindet, finden sich hier auch h√§ufig ein paar Spieler:innen', type: 'leisure' }
    ],
    Freitag: [
      { title: 'Kneipenkickern', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/61L8ZAeVZfMYWnCH9">Flex, M√ºnchen</a>', link: 'https://www.flex-muenchen.de/', description: 'Freitag und Samstag sind normalerweise immer ein paar Leute da. Wenn nicht hier, dann in der S√ºdstadt nebenan.', type: 'leisure'  },
      { title: 'Kneipenkickern', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/tHnYFwcH5km1cfgNA">S√ºdstadt, M√ºnchen</a>', link: 'https://www.suedstadt-schlachthof.de/', description: 'Freitag und Samstag sind normalerweise immer ein paar Leute da. Wenn nicht hier, dann im Flex nebenan.', type: 'leisure'  },
      { title: 'Turnier / freies Spiel / Monster DYP', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/H39hEXPVwLge3HRf8">TSG Maisach</a>', link: 'https://www.tsgmaisach.de/', whatsapp: 'https://chat.whatsapp.com/JVXJSnSg0tBHjIJ3E22Gnd?mode=ems_qr_t', description: 'Je nach Zahl der Anwesenden wird hier gespielt, trainiert oder ein Turnier gespielt.', type: 'tournament'  }
    ],
    Samstag: [
      { title: 'Einzelturnier (zweiw√∂chentlich)', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/dj5vfbZqDJvzbKNg8">Die Katze, KC M√ºnchen</a>', link: 'https://kc-muenchen.de/', whatsapp:'https://chat.whatsapp.com/FaSZY5WEKq63ChSRYcvYjM', description: 'Zweiw√∂chentliches Einzelturnier des KickerClub M√ºnchen e.V.. Findet immer alternierend zum Monster-DYP im Flex statt.', type: 'tournament'  },
      { title: 'Kneipenkickern', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/61L8ZAeVZfMYWnCH9">Flex, M√ºnchen</a>', link: 'https://www.flex-muenchen.de/', description: 'Freitag und Samstag sind normalerweise immer ein paar Leute da. Wenn nicht hier, dann in der S√ºdstadt nebenan.', type: 'leisure'  },
      { title: 'Kneipenkickern', time: '8:00 PM', location: '<a href="https://maps.app.goo.gl/tHnYFwcH5km1cfgNA">S√ºdstadt, M√ºnchen</a>', link: 'https://www.suedstadt-schlachthof.de/', description: 'Freitag und Samstag sind normalerweise immer ein paar Leute da. Wenn nicht hier, dann im Flex nebenan.', type: 'leisure'  },
    ],
  };

  let currentDayIndex = 0;

  const calendar = document.getElementById('calendar');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');

  function renderCalendar() {
    calendar.innerHTML = '';
    const container = document.createElement('div');
    container.className = 'calendar-container';

    // Always render all days
    days.forEach((day, index) => {
      container.appendChild(createDayBox(day, entries[day] || []));
    });

    calendar.appendChild(container);

    // Wait for the DOM to update
    setTimeout(() => {
      updateCalendarPosition();
      updateButtons();
    }, 0);
  }

  function updateCalendarPosition() {
    const container = document.querySelector('.calendar-container');
    if (!container) return;

    if (window.innerWidth >= 700) {
      // On desktop, show all days in a grid
      container.style.transform = 'translateX(0)';
      container.style.width = '100%';
      document.querySelectorAll('.day').forEach(day => {
        day.style.flex = '1';
        day.style.minWidth = '0';
      });
    } else {
      // On mobile, show one day at a time with infinite loop
      const dayWidth = container.parentElement.offsetWidth;
      const totalDays = days.length;

      // Handle infinite loop by duplicating days at the beginning and end
      if (currentDayIndex < 0) currentDayIndex = totalDays - 1;
      if (currentDayIndex >= totalDays) currentDayIndex = 0;

      container.style.width = `${dayWidth * totalDays}px`;
      container.style.transform = `translateX(-${currentDayIndex * dayWidth}px)`;

      document.querySelectorAll('.day').forEach(day => {
        day.style.flex = `0 0 ${dayWidth}px`;
        day.style.minWidth = `${dayWidth}px`;
      });
    }
  }

  function createDayBox(day, items) {
    const div = document.createElement('div');
    div.className = 'day';
    div.innerHTML = `<h3>${day}</h3>`;
    items.forEach(item => {
      const entry = document.createElement('div');
      entry.className = `entry ${item.type || ''}`;

      let html = `<strong>${item.title}</strong><br>`;
      if (item.time) html += `<em>${item.time}</em><br>`;
      if (item.location) html += `üìç ${item.location}<br>`;
      if (item.link) html += `<a href="${item.link}" target="_blank">üîó Website</a><br>`;
      if (item.whatsapp) html += `<a href="${item.whatsapp}" target="_blank">üó®Ô∏è WhatsApp-Gruppe</a><br>`
      if (item.description) html += `<small>${item.description}</small><br>`;

      entry.innerHTML = html;
      div.appendChild(entry);
    });
    return div;
  }

  function updateButtons() {
    // No need to disable buttons with infinite loop
    // But we can still update the UI if needed
    prevBtn.style.opacity = '1';
    nextBtn.style.opacity = '1';
  }

  prevBtn.addEventListener('click', () => {
    currentDayIndex = (currentDayIndex - 1 + days.length) % days.length;
    updateCalendarPosition();
    updateButtons();
  });

  nextBtn.addEventListener('click', () => {
    currentDayIndex = (currentDayIndex + 1) % days.length;
    updateCalendarPosition();
    updateButtons();
  });


  // Enhanced swipe support with infinite loop
  let touchStartX = 0;
  let isDragging = false;
  let startPos = 0;
  let currentTranslate = 0;
  let prevTranslate = 0;

  calendar.addEventListener('mousedown', dragStart);
  calendar.addEventListener('touchstart', dragStart);
  calendar.addEventListener('mouseup', dragEnd);
  calendar.addEventListener('touchend', dragEnd);
  calendar.addEventListener('mousemove', drag);
  calendar.addEventListener('touchmove', drag, { passive: false });

  function dragStart(e) {
    if (window.innerWidth >= 700) return;

    isDragging = true;
    startPos = e.clientX || e.touches[0].clientX;
    prevTranslate = currentTranslate;

    const container = document.querySelector('.calendar-container');
    container.style.transition = 'none';

    e.preventDefault();
  }

  function drag(e) {
    if (!isDragging || window.innerWidth >= 700) return;

    const currentPosition = e.clientX || e.touches[0].clientX;
    const diff = currentPosition - startPos;
    const container = document.querySelector('.calendar-container');

    // Allow continuous dragging in both directions
    currentTranslate = prevTranslate + diff;
    container.style.transition = 'none';
    container.style.transform = `translateX(${currentTranslate}px)`;

    e.preventDefault();
  }

  function dragEnd() {
    if (window.innerWidth >= 700) return;

    isDragging = false;
    const container = document.querySelector('.calendar-container');
    if (!container) return;

    container.style.transition = 'transform 0.3s ease';

    const dayWidth = container.parentElement.offsetWidth;
    const threshold = dayWidth * 0.15; // 15% of day width as threshold

    // Calculate the target day based on drag distance
    const dragDistance = Math.abs(currentTranslate - prevTranslate);
    const shouldSwipe = dragDistance > threshold;

    if (shouldSwipe) {
      if (currentTranslate < prevTranslate) {
        // Swipe left - next day with infinite loop
        currentDayIndex = (currentDayIndex + 1) % days.length;
      } else {
        // Swipe right - previous day with infinite loop
        currentDayIndex = (currentDayIndex - 1 + days.length) % days.length;
      }
    }

    // Snap to the target day
    updateCalendarPosition();
  }

  // Handle window resize
  let resizeTimer;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
      updateCalendarPosition();
      updateButtons();
    }, 250);
  });

  renderCalendar();
</script>

<footer style="margin-top: 40px; font-size: 0.9em; color: #666; text-align: center;">
  <img src="https://kc-muenchen.de/wp-content/uploads/2024/05/Logo_cat_only.png" alt="Logo KC M√ºnchen" width="150"><br><br>
  ¬© 2025 ¬∑ Made with ‚öΩ by <a href="https://kc-muenchen.de" target="_blank" style="color: #00796b; text-decoration: none;">KickerClub M√ºnchen e.V. - M√ºnchens Kicker-Herz schl√§gt hier!</a>
</footer>

</body>
</html>
